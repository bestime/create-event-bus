(function(e){function t(e,t,n){"object"==typeof module&&"object"==typeof module.exports?module.exports=n:"function"==typeof define&&define.amd?define([],function(){return n}):e[t]=n}function n(e){return Object.prototype.toString.call(e).split(" ")[1].slice(0,-1)}function s(){this.events={},this.autoId=0}s.prototype.create=function(e,t,s,i,o){if("Function"!==n(s))return null;var r=e||this.autoId++,c={name:t,id:r,handle:s,isOnce:!0===i};if(o)this.events[t]=c;else{"Array"!==n(this.events[t])&&(this.events[t]=[]);for(var h=!1,a=0;a<this.events[t].length;a++)if(this.events[t][a].id===r){this.events[t][a]=c,h=!0;break}!h&&this.events[t].push(c)}return c},s.prototype.emit=function(e,t){switch(n(this.events[e])){case"Object":this.events[e].handle(t,this.events[e]),this.events[e].isOnce&&delete this.events[e];break;case"Array":for(var s=this.events[e].length-1;s>=0;s--){var i=this.events[e][s];i.handle(t,i),i.isOnce&&this.events[e].splice(s,1)}}},s.prototype.clearAll=function(){this.events={},this.autoId=0},s.prototype.clear=function(e){if("Object"===n(e))switch(n(this.events[e.name])){case"Object":delete this.events[e.name];break;case"Array":for(var t=this.events[e.name].length-1;t>=0;t--)this.events[e.name][t].id===e.id&&this.events[e.name].splice(t,1)}},s.prototype.on=function(e,t,n){return this.create(n,e,t)},s.prototype.once=function(e,t,n){return this.create(n,e,t,!0)},s.prototype.one=function(e,t){return this.create(null,e,t,!1,!0)},s.prototype.oneonce=function(e,t){return this.create(null,e,t,!0,!0)},t(e,"CreateEventBus",s)})(this);